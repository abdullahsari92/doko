"use strict";var KTMenu=function(b,c){var a=this,d=!1,e=KTUtil.get(b),g=KTUtil.get("body");if(e){var h={scroll:{rememberPosition:!1},accordion:{slideSpeed:200,autoScroll:!1,autoScrollSpeed:1200,expandAll:!0},dropdown:{timeout:500}},f={construct:function(b){return KTUtil.data(e).has("menu")?a=KTUtil.data(e).get("menu"):(f.init(b),f.reset(),f.build(),KTUtil.data(e).set("menu",a)),a},init:function(b){a.events=[],a.eventHandlers={},a.options=KTUtil.deepExtend({},h,b),a.pauseDropdownHoverTime=0,a.uid=KTUtil.getUniqueID()},update:function(b){a.options=KTUtil.deepExtend({},h,b),a.pauseDropdownHoverTime=0,f.reset(),a.eventHandlers={},f.build(),KTUtil.data(e).set("menu",a)},reload:function(){f.reset(),f.build(),f.resetSubmenuProps()},build:function(){a.eventHandlers.event_1=KTUtil.on(e,".kt-menu__toggle","click",f.handleSubmenuAccordion),("dropdown"===f.getSubmenuMode()||f.isConditionalSubmenuDropdown())&&(a.eventHandlers.event_2=KTUtil.on(e,'[data-ktmenu-submenu-toggle="hover"]',"mouseover",f.handleSubmenuDrodownHoverEnter),a.eventHandlers.event_3=KTUtil.on(e,'[data-ktmenu-submenu-toggle="hover"]',"mouseout",f.handleSubmenuDrodownHoverExit),a.eventHandlers.event_4=KTUtil.on(e,'[data-ktmenu-submenu-toggle="click"] > .kt-menu__toggle, [data-ktmenu-submenu-toggle="click"] > .kt-menu__link .kt-menu__toggle',"click",f.handleSubmenuDropdownClick),a.eventHandlers.event_5=KTUtil.on(e,'[data-ktmenu-submenu-toggle="tab"] > .kt-menu__toggle, [data-ktmenu-submenu-toggle="tab"] > .kt-menu__link .kt-menu__toggle',"click",f.handleSubmenuDropdownTabClick)),a.eventHandlers.event_6=KTUtil.on(e,".kt-menu__item > .kt-menu__link:not(.kt-menu__toggle):not(.kt-menu__link--toggle-skip)","click",f.handleLinkClick),a.options.scroll&&a.options.scroll.height&&f.scrollInit()},reset:function(){KTUtil.off(e,"click",a.eventHandlers.event_1),KTUtil.off(e,"mouseover",a.eventHandlers.event_2),KTUtil.off(e,"mouseout",a.eventHandlers.event_3),KTUtil.off(e,"click",a.eventHandlers.event_4),KTUtil.off(e,"click",a.eventHandlers.event_5),KTUtil.off(e,"click",a.eventHandlers.event_6)},scrollInit:function(){a.options.scroll&&a.options.scroll.height?(KTUtil.scrollDestroy(e),KTUtil.scrollInit(e,{mobileNativeScroll:!0,windowScroll:!1,resetHeightOnDestroy:!0,handleWindowResize:!0,height:a.options.scroll.height,rememberPosition:a.options.scroll.rememberPosition})):KTUtil.scrollDestroy(e)},scrollUpdate:function(){a.options.scroll&&a.options.scroll.height&&KTUtil.scrollUpdate(e)},scrollTop:function(){a.options.scroll&&a.options.scroll.height&&KTUtil.scrollTop(e)},getSubmenuMode:function(b){if(KTUtil.isInResponsiveRange("desktop")){if(b&&KTUtil.hasAttr(b,"data-ktmenu-submenu-toggle")&&"hover"==KTUtil.attr(b,"data-ktmenu-submenu-toggle"))return"dropdown";if(KTUtil.isset(a.options.submenu,"desktop.state.body"))return KTUtil.hasClasses(g,a.options.submenu.desktop.state.body)?a.options.submenu.desktop.state.mode:a.options.submenu.desktop.default;if(KTUtil.isset(a.options.submenu,"desktop"))return a.options.submenu.desktop}else if(KTUtil.isInResponsiveRange("tablet")&&KTUtil.isset(a.options.submenu,"tablet"))return a.options.submenu.tablet;else if(KTUtil.isInResponsiveRange("mobile")&&KTUtil.isset(a.options.submenu,"mobile"))return a.options.submenu.mobile;else return!1},isConditionalSubmenuDropdown:function(){return!!(KTUtil.isInResponsiveRange("desktop")&&KTUtil.isset(a.options.submenu,"desktop.state.body"))},resetSubmenuProps:function(d){var a=KTUtil.findAll(e,".kt-menu__submenu");if(a)for(var b=0,c=a.length;b<c;b++)KTUtil.css(a[0],"display",""),KTUtil.css(a[0],"overflow","")},handleSubmenuDrodownHoverEnter:function(b){"accordion"!==f.getSubmenuMode(this)&& !1!==a.resumeDropdownHover()&&("1"==this.getAttribute("data-hover")&&(this.removeAttribute("data-hover"),clearTimeout(this.getAttribute("data-timeout")),this.removeAttribute("data-timeout")),f.showSubmenuDropdown(this))},handleSubmenuDrodownHoverExit:function(d){if(!1!==a.resumeDropdownHover()&&"accordion"!==f.getSubmenuMode(this)){var b=this,c=setTimeout(function(){"1"==b.getAttribute("data-hover")&&f.hideSubmenuDropdown(b,!0)},a.options.dropdown.timeout);b.setAttribute("data-hover","1"),b.setAttribute("data-timeout",c)}},handleSubmenuDropdownClick:function(b){if("accordion"!==f.getSubmenuMode(this)){var a=this.closest(".kt-menu__item");"accordion"!=a.getAttribute("data-ktmenu-submenu-mode")&&(!1===KTUtil.hasClass(a,"kt-menu__item--hover")?(KTUtil.addClass(a,"kt-menu__item--open-dropdown"),f.showSubmenuDropdown(a)):(KTUtil.removeClass(a,"kt-menu__item--open-dropdown"),f.hideSubmenuDropdown(a,!0)),b.preventDefault())}},handleSubmenuDropdownTabClick:function(b){if("accordion"!==f.getSubmenuMode(this)){var a=this.closest(".kt-menu__item");"accordion"!=a.getAttribute("data-ktmenu-submenu-mode")&&(!1==KTUtil.hasClass(a,"kt-menu__item--hover")&&(KTUtil.addClass(a,"kt-menu__item--open-dropdown"),f.showSubmenuDropdown(a)),b.preventDefault())}},handleLinkClick:function(b){var a=this.closest(".kt-menu__item.kt-menu__item--submenu");!1!==f.eventTrigger("linkClick",this,b)&&a&&"dropdown"===f.getSubmenuMode(a)&&f.hideSubmenuDropdowns()},handleSubmenuDropdownClose:function(g,a){if("accordion"!==f.getSubmenuMode(a)){var b=e.querySelectorAll(".kt-menu__item.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs)");if(b.length>0&& !1===KTUtil.hasClass(a,"kt-menu__toggle")&&0===a.querySelectorAll(".kt-menu__toggle").length)for(var c=0,d=b.length;c<d;c++)f.hideSubmenuDropdown(b[0],!0)}},handleSubmenuAccordion:function(h,i){var j,c=i||this;if("dropdown"===f.getSubmenuMode(i)&&(j=c.closest(".kt-menu__item"))&&"accordion"!=j.getAttribute("data-ktmenu-submenu-mode")){h.preventDefault();return}var b=c.closest(".kt-menu__item"),d=KTUtil.child(b,".kt-menu__submenu, .kt-menu__inner");if(!KTUtil.hasClass(c.closest(".kt-menu__item"),"kt-menu__item--open-always")&&b&&d){h.preventDefault();var e=a.options.accordion.slideSpeed;if(!1===KTUtil.hasClass(b,"kt-menu__item--open")){if(!1===a.options.accordion.expandAll){var k=c.closest(".kt-menu__nav, .kt-menu__subnav"),g=KTUtil.children(k,".kt-menu__item.kt-menu__item--open.kt-menu__item--submenu:not(.kt-menu__item--here):not(.kt-menu__item--open-always)");if(k&&g)for(var l=0,n=g.length;l<n;l++){var o=g[0],m=KTUtil.child(o,".kt-menu__submenu");m&&KTUtil.slideUp(m,e,function(){f.scrollUpdate(),KTUtil.removeClass(o,"kt-menu__item--open")})}}KTUtil.slideDown(d,e,function(){f.scrollToItem(c),f.scrollUpdate(),f.eventTrigger("submenuToggle",d,h)}),KTUtil.addClass(b,"kt-menu__item--open")}else KTUtil.slideUp(d,e,function(){f.scrollToItem(c),f.eventTrigger("submenuToggle",d,h)}),KTUtil.removeClass(b,"kt-menu__item--open")}},scrollToItem:function(b){KTUtil.isInResponsiveRange("desktop")&&a.options.accordion.autoScroll&&"1"!==e.getAttribute("data-ktmenu-scroll")&&KTUtil.scrollTo(b,a.options.accordion.autoScrollSpeed)},hideSubmenuDropdown:function(a,b){b&&(KTUtil.removeClass(a,"kt-menu__item--hover"),KTUtil.removeClass(a,"kt-menu__item--active-tab")),a.removeAttribute("data-hover"),a.getAttribute("data-ktmenu-dropdown-toggle-class")&&KTUtil.removeClass(g,a.getAttribute("data-ktmenu-dropdown-toggle-class"));var c=a.getAttribute("data-timeout");a.removeAttribute("data-timeout"),clearTimeout(c)},hideSubmenuDropdowns:function(){var a;if(a=e.querySelectorAll('.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs):not([data-ktmenu-submenu-toggle="tab"])'))for(var b=0,c=a.length;b<c;b++)f.hideSubmenuDropdown(a[b],!0)},showSubmenuDropdown:function(a){var c=e.querySelectorAll(".kt-menu__item--submenu.kt-menu__item--hover, .kt-menu__item--submenu.kt-menu__item--active-tab");if(c)for(var d=0,h=c.length;d<h;d++){var b=c[d];a!==b&& !1===b.contains(a)&& !1===a.contains(b)&&f.hideSubmenuDropdown(b,!0)}KTUtil.addClass(a,"kt-menu__item--hover"),a.getAttribute("data-ktmenu-dropdown-toggle-class")&&KTUtil.addClass(g,a.getAttribute("data-ktmenu-dropdown-toggle-class"))},createSubmenuDropdownClickDropoff:function(c){var a,d=(a=KTUtil.child(c,".kt-menu__submenu")?KTUtil.css(a,"z-index"):0)-1,b=document.createElement('<div class="kt-menu__dropoff" style="background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: '+d+'"></div>');g.appendChild(b),KTUtil.addEvent(b,"click",function(a){a.stopPropagation(),a.preventDefault(),KTUtil.remove(this),f.hideSubmenuDropdown(c,!0)})},pauseDropdownHover:function(b){var c=new Date;a.pauseDropdownHoverTime=c.getTime()+b},resumeDropdownHover:function(){return new Date().getTime()>a.pauseDropdownHoverTime},resetActiveItem:function(k){c=e.querySelectorAll(".kt-menu__item--active");for(var c,d,b=0,f=c.length;b<f;b++){var g=c[0];KTUtil.removeClass(g,"kt-menu__item--active"),KTUtil.hide(KTUtil.child(g,".kt-menu__submenu")),d=KTUtil.parents(g,".kt-menu__item--submenu")||[];for(var h=0,j=d.length;h<j;h++){var i=d[b];KTUtil.removeClass(i,"kt-menu__item--open"),KTUtil.hide(KTUtil.child(i,".kt-menu__submenu"))}}if(!1===a.options.accordion.expandAll&&(c=e.querySelectorAll(".kt-menu__item--open")))for(var b=0,f=c.length;b<f;b++)KTUtil.removeClass(d[0],"kt-menu__item--open")},setActiveItem:function(b){f.resetActiveItem();for(var c=KTUtil.parents(b,".kt-menu__item--submenu")||[],a=0,d=c.length;a<d;a++)KTUtil.addClass(KTUtil.get(c[a]),"kt-menu__item--open");KTUtil.addClass(KTUtil.get(b),"kt-menu__item--active")},getBreadcrumbs:function(f){var a,b=[],c=KTUtil.child(f,".kt-menu__link");b.push({text:a=KTUtil.child(c,".kt-menu__link-text")?a.innerHTML:"",title:c.getAttribute("title"),href:c.getAttribute("href")});for(var g=KTUtil.parents(f,".kt-menu__item--submenu"),d=0,h=g.length;d<h;d++){var e=KTUtil.child(g[d],".kt-menu__link");b.push({text:a=KTUtil.child(e,".kt-menu__link-text")?a.innerHTML:"",title:e.getAttribute("title"),href:e.getAttribute("href")})}return b.reverse()},getPageTitle:function(a){var b;return KTUtil.child(a,".kt-menu__link-text")?b.innerHTML:""},eventTrigger:function(f,d,e){for(var c=0;c<a.events.length;c++){var b=a.events[c];if(b.name==f){if(!0!=b.one)return b.handler.call(this,d,e);if(!1==b.fired)return a.events[c].fired=!0,b.handler.call(this,d,e)}}},addEvent:function(b,c,d){a.events.push({name:b,handler:c,one:d,fired:!1})},removeEvent:function(b){a.events[b]&&delete a.events[b]}};return a.setDefaults=function(a){h=a},a.scrollUpdate=function(){return f.scrollUpdate()},a.scrollReInit=function(){return f.scrollInit()},a.scrollTop=function(){return f.scrollTop()},a.setActiveItem=function(a){return f.setActiveItem(a)},a.reload=function(){return f.reload()},a.update=function(a){return f.update(a)},a.getBreadcrumbs=function(a){return f.getBreadcrumbs(a)},a.getPageTitle=function(a){return f.getPageTitle(a)},a.getSubmenuMode=function(a){return f.getSubmenuMode(a)},a.hideDropdown=function(a){f.hideSubmenuDropdown(a,!0)},a.hideDropdowns=function(){f.hideSubmenuDropdowns()},a.pauseDropdownHover=function(a){f.pauseDropdownHover(a)},a.resumeDropdownHover=function(){return f.resumeDropdownHover()},a.on=function(a,b){return f.addEvent(a,b)},a.off=function(a){return f.removeEvent(a)},a.one=function(a,b){return f.addEvent(a,b,!0)},f.construct.apply(a,[c]),KTUtil.addResizeHandler(function(){d&&a.reload()}),d=!0,a}};"undefined"!=typeof module&& void 0!==module.exports&&(module.exports=KTMenu),document.addEventListener("click",function(e){var c;if(c=KTUtil.get("body").querySelectorAll('.kt-menu__nav .kt-menu__item.kt-menu__item--submenu.kt-menu__item--hover:not(.kt-menu__item--tabs)[data-ktmenu-submenu-toggle="click"]'))for(var d=0,f=c.length;d<f;d++){var a=c[d].closest(".kt-menu__nav").parentNode;if(a){var b=KTUtil.data(a).get("menu");if(!b|| !b||"dropdown"!==b.getSubmenuMode())break;e.target!==a&& !1===a.contains(e.target)&&b.hideDropdowns()}}})